var currentLocation=window.location;function writeUs(){var e=document.querySelector(".about-us__btn"),t=document.querySelector(".modal.write-us"),o=t.querySelector(".btn-modal-close"),s=t.querySelector("form"),i=t.querySelector("[name=name]"),l=t.querySelector("[name=email]"),r=t.querySelector("[name=text]"),a=!0,n="",c="";try{n=localStorage.getItem("nameField"),c=localStorage.getItem("emailField")}catch(e){a=!1}e.addEventListener("click",function(e){e.preventDefault(),t.classList.add("modal__show_flex"),n?i.value=n:i.focus(),c&&(l.value=c),n&&!c&&l.focus(),n&&c&&r.focus()}),o.addEventListener("click",function(e){e.preventDefault(),t.classList.remove("modal__show_flex"),t.classList.remove("modal-error")}),s.addEventListener("submit",function(e){i.value&&l.value&&r.value?a&&(localStorage.setItem("nameField",i.value),localStorage.setItem("emailField",l.value)):(e.preventDefault(),t.classList.remove("modal-error"),t.offsetWidth,t.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),t.classList.contains("modal__show_flex")&&(t.classList.remove("modal__show_flex"),t.classList.remove("modal-error")))})}function map(){var e=document.querySelector(".contacts__link_map"),t=document.querySelector(".modal-map"),o=t.querySelector(".btn-modal-close");e.addEventListener("click",function(e){e.preventDefault(),t.classList.add("modal__show_block")}),o.addEventListener("click",function(e){e.preventDefault(),t.classList.remove("modal__show_block")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),t.classList.contains("modal__show_block")&&t.classList.remove("modal__show_block"))})}function goodsCardBasket(){for(var e=document.querySelectorAll(".goods-card__link_buy"),t=document.querySelector(".modal-add-basket"),o=t.querySelector(".btn-modal-close"),s=t.querySelector(".modal-add-basket__continue"),i=0;i<e.length;i++){e[i].addEventListener("click",function(e){e.preventDefault(),t.classList.add("modal__show_flex")})}o.addEventListener("click",function(e){e.preventDefault(),t.classList.remove("modal__show_flex")}),s.addEventListener("click",function(e){e.preventDefault(),t.classList.remove("modal__show_flex")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),t.classList.contains("modal__show_flex")&&t.classList.remove("modal__show_flex"))})}function service(){for(var e=document.querySelectorAll(".service__item"),t=document.querySelectorAll(".service__item2"),o=function(o,s){o.addEventListener("click",function(){var e=document.querySelector(".service__item_active"),t=document.querySelector(".service__item2_active");e.classList.remove("service__item_active"),o.classList.add("service__item_active"),t.classList.remove("service__item2_active"),s.classList.add("service__item2_active")})},s=0;s<e.length;s++)o(e[s],t[s])}function slider(){var e=document.querySelector(".promo-slider__prev"),t=document.querySelector(".promo-slider__next"),o=document.querySelectorAll(".promo-slider__dot-btn"),s=document.querySelectorAll(".promo-slider__item"),i=function(o,s){o.addEventListener("click",function(){var e=document.querySelector(".promo-slider__dot-btn_active"),t=document.querySelector(".promo-slider__item.visible");e.classList.remove("promo-slider__dot-btn_active"),o.classList.add("promo-slider__dot-btn_active"),t.classList.remove("visible"),s.classList.add("visible")})};t.addEventListener("click",function(){for(var e=0;e<s.length;e++){if(s[e].classList.contains("visible")&&e===s.length-1)return s[e].classList.remove("visible"),o[e].classList.remove("promo-slider__dot-btn_active"),s[0].classList.add("visible"),void o[0].classList.add("promo-slider__dot-btn_active");if(s[e].classList.contains("visible")&&0<=e&&e<s.length-1)return s[e].classList.remove("visible"),o[e].classList.remove("promo-slider__dot-btn_active"),s[e+1].classList.add("visible"),void o[e+1].classList.add("promo-slider__dot-btn_active")}}),e.addEventListener("click",function(){for(var e=0;e<s.length;e++){var t=s.length-1;if(s[e].classList.contains("visible")&&0===e)return s[e].classList.remove("visible"),o[e].classList.remove("promo-slider__dot-btn_active"),s[t].classList.add("visible"),void o[t].classList.add("promo-slider__dot-btn_active");if(s[e].classList.contains("visible")&&0<e&&e<=s.length-1)return s[e].classList.remove("visible"),o[e].classList.remove("promo-slider__dot-btn_active"),s[e-1].classList.add("visible"),void o[e-1].classList.add("promo-slider__dot-btn_active")}});for(var l=0;l<o.length;l++)i(o[l],s[l])}function filterRangeSlider(){var e=document.querySelector(".filter-range"),t=document.querySelector(".range-slider"),a=t.querySelector(".range-slider__td_left"),n=t.querySelector(".range-slider__td_right"),o=t.querySelector(".range-slider__thumb_left"),s=t.querySelector(".range-slider__thumb_right"),c=s.offsetWidth,r=e.querySelector(".filter-range__value_min"),d=e.querySelector(".filter-range__value_max"),u=t.offsetWidth,m=(d.dataset.max_value-r.dataset.min_value)/(u-2*c);function v(e){var t=e.getBoundingClientRect();return{top:t.top+pageYOffset,left:t.left+pageXOffset}}o.onmousedown=function(e){var t=v(this),s=e.pageX-t.left,i=v(a),l=n.offsetWidth;return!(document.onmousemove=function(e){var t=e.pageX-i.left,o=t-s+c;t<=s&&(o=c),u-l<o&&(o=u-l),a.style.width=o+"px",document.onmouseup=function(){document.onmousemove=document.onmouseup=null},r.value=(a.offsetWidth-c)*m})},s.onmousedown=function(e){var t=v(this),s=c-(e.pageX-t.left),i=v(n).left,l=a.offsetWidth,r=n.offsetWidth;return!(document.onmousemove=function(e){var t=i+r-e.pageX,o=t-s+c;t<=s&&(o=c),u-l<o&&(o=u-l),n.style.width=o+"px",document.onmouseup=function(){document.onmousemove=document.onmouseup=null},d.value=(u-n.offsetWidth-c)*m})},r.addEventListener("keydown",function(e){var t=u-n.offsetWidth;13===e.keyCode&&this.focus&&(e.preventDefault(),this.value<0&&(this.value=0,a.style.width=c+"px"),this.value>(t-c)*m&&(this.value=(t-c)*m,a.style.width=t+"px"),0<=this.value<=(t-c)*m&&(a.style.width=Number(this.value)/m+Number(c)+"px"),this.select())}),d.addEventListener("keydown",function(e){13===e.keyCode&&this.focus&&(e.preventDefault(),+this.value<+r.value&&(this.value=r.value,n.style.width=Number(c)-Number(a.offsetWidth)+"px"),this.value>(u-2*c)*m&&(this.value=(u-2*c)*m,n.style.width=Number(c)-Number(c)+"px"),r.value<=this.value<=(u-2*c)*m&&(n.style.width=Number(u)-Number(d.value)/m-Number(c)+"px"),this.select())}),o.ondragstart=function(){return!1},a.style.width=Number(r.value)/m+Number(c)+"px",n.style.width=Number(u)-Number(d.value)/m-Number(c)+"px"}0<=currentLocation.pathname.lastIndexOf("/index.html")&&(writeUs(),map(),goodsCardBasket(),service(),slider()),0<=currentLocation.pathname.lastIndexOf("/catalog.html")&&(goodsCardBasket(),filterRangeSlider());
