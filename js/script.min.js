var currentLocation=window.location;function writeUs(){var e=document.querySelector(".about-us__btn"),t=document.querySelector(".modal.write-us"),s=t.querySelector(".btn-modal-close"),o=t.querySelector("form"),i=t.querySelector("[name=name]"),l=t.querySelector("[name=email]"),r=t.querySelector("[name=text]"),a=!0,n="",d="";try{n=localStorage.getItem("nameField"),d=localStorage.getItem("emailField")}catch(e){a=!1}e.addEventListener("click",function(e){e.preventDefault(),t.classList.add("modal__show_flex"),n?i.value=n:i.focus(),d&&(l.value=d),n&&!d&&l.focus(),n&&d&&r.focus()}),s.addEventListener("click",function(e){e.preventDefault(),t.classList.remove("modal__show_flex"),t.classList.remove("modal-error")}),o.addEventListener("submit",function(e){i.value&&l.value&&r.value?a&&(localStorage.setItem("nameField",i.value),localStorage.setItem("emailField",l.value)):(e.preventDefault(),t.classList.remove("modal-error"),t.offsetWidth,t.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),t.classList.contains("modal__show_flex")&&(t.classList.remove("modal__show_flex"),t.classList.remove("modal-error")))})}function map(){var e=document.querySelector(".contacts__link_map"),t=document.querySelector(".modal-map"),s=t.querySelector(".btn-modal-close");e.addEventListener("click",function(e){e.preventDefault(),t.classList.add("modal__show_block")}),s.addEventListener("click",function(e){e.preventDefault(),t.classList.remove("modal__show_block")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),t.classList.contains("modal__show_block")&&t.classList.remove("modal__show_block"))})}function goodsCardBasket(){for(var e=document.querySelectorAll(".goods-card__link_buy"),t=document.querySelector(".modal-add-basket"),s=t.querySelector(".btn-modal-close"),o=t.querySelector(".modal-add-basket__continue"),i=0;i<e.length;i++){e[i].addEventListener("click",function(e){e.preventDefault(),t.classList.add("modal__show_flex")})}s.addEventListener("click",function(e){e.preventDefault(),t.classList.remove("modal__show_flex")}),o.addEventListener("click",function(e){e.preventDefault(),t.classList.remove("modal__show_flex")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),t.classList.contains("modal__show_flex")&&t.classList.remove("modal__show_flex"))})}function service(){for(var e=document.querySelectorAll(".service__item"),t=document.querySelectorAll(".service__item2"),s=function(s,o){s.addEventListener("click",function(){var e=document.querySelector(".service__item_active"),t=document.querySelector(".service__item2_active");e.classList.remove("service__item_active"),s.classList.add("service__item_active"),t.classList.remove("service__item2_active"),o.classList.add("service__item2_active")})},o=0;o<e.length;o++)s(e[o],t[o])}function slider(){var e=document.querySelector(".promo-slider__prev"),t=document.querySelector(".promo-slider__next"),s=document.querySelectorAll(".promo-slider__dot-btn"),o=document.querySelectorAll(".promo-slider__item"),i=function(s,o){s.addEventListener("click",function(){var e=document.querySelector(".promo-slider__dot-btn_active"),t=document.querySelector(".promo-slider__item.visible");e.classList.remove("promo-slider__dot-btn_active"),s.classList.add("promo-slider__dot-btn_active"),t.classList.remove("visible"),o.classList.add("visible")})};t.addEventListener("click",function(){for(var e=0;e<o.length;e++){if(o[e].classList.contains("visible")&&e===o.length-1)return o[e].classList.remove("visible"),s[e].classList.remove("promo-slider__dot-btn_active"),o[0].classList.add("visible"),void s[0].classList.add("promo-slider__dot-btn_active");if(o[e].classList.contains("visible")&&0<=e&&e<o.length-1)return o[e].classList.remove("visible"),s[e].classList.remove("promo-slider__dot-btn_active"),o[e+1].classList.add("visible"),void s[e+1].classList.add("promo-slider__dot-btn_active")}}),e.addEventListener("click",function(){for(var e=0;e<o.length;e++){var t=o.length-1;if(o[e].classList.contains("visible")&&0===e)return o[e].classList.remove("visible"),s[e].classList.remove("promo-slider__dot-btn_active"),o[t].classList.add("visible"),void s[t].classList.add("promo-slider__dot-btn_active");if(o[e].classList.contains("visible")&&0<e&&e<=o.length-1)return o[e].classList.remove("visible"),s[e].classList.remove("promo-slider__dot-btn_active"),o[e-1].classList.add("visible"),void s[e-1].classList.add("promo-slider__dot-btn_active")}});for(var l=0;l<s.length;l++)i(s[l],o[l])}function filterRangeSlider(){var e=document.querySelector(".filter-range"),t=document.querySelector(".range-slider"),a=t.querySelector(".range-slider__td_left"),n=t.querySelector(".range-slider__td_right"),s=t.querySelector(".range-slider__thumb_left"),o=t.querySelector(".range-slider__thumb_right"),d=o.offsetWidth,r=e.querySelector(".filter-range__value_min"),c=e.querySelector(".filter-range__value_max"),u=t.offsetWidth,v=(c.dataset.max_value-r.dataset.min_value)/(u-2*d);function m(e){var t=e.getBoundingClientRect();return{top:t.top+pageYOffset,left:t.left+pageXOffset}}s.onmousedown=function(e){var t=m(this),o=e.pageX-t.left,i=m(a),l=n.offsetWidth;return!(document.onmousemove=function(e){var t=e.pageX-i.left,s=t-o+d;t<=o&&(s=d),u-l<s&&(s=u-l),a.style.width=s+"px",document.onmouseup=function(){document.onmousemove=document.onmouseup=null},r.value=(a.offsetWidth-d)*v})},o.onmousedown=function(e){var t=m(this),o=d-(e.pageX-t.left),i=m(n).left,l=a.offsetWidth,r=n.offsetWidth;return!(document.onmousemove=function(e){var t=i+r-e.pageX,s=t-o+d;t<=o&&(s=d),u-l<s&&(s=u-l),n.style.width=s+"px",document.onmouseup=function(){document.onmousemove=document.onmouseup=null},c.value=(u-n.offsetWidth-d)*v})},r.addEventListener("keydown",function(e){var t=u-n.offsetWidth;13===e.keyCode&&this.focus&&(e.preventDefault(),this.value<0&&(this.value=0,a.style.width=d+"px"),this.value>(t-d)*v&&(this.value=(t-d)*v,a.style.width=t+"px"),0<=this.value<=(t-d)*v&&(a.style.width=Number(this.value)/v+Number(d)+"px"),this.select())}),r.addEventListener("blur",function(){var e=u-n.offsetWidth;this.value<0&&(this.value=0,a.style.width=d+"px"),this.value>(e-d)*v&&(this.value=(e-d)*v,a.style.width=e+"px"),0<=this.value<=(e-d)*v&&(a.style.width=Number(this.value)/v+Number(d)+"px")}),c.addEventListener("keydown",function(e){13===e.keyCode&&this.focus&&(e.preventDefault(),+this.value<+r.value&&(this.value=r.value,n.style.width=Number(d)-Number(a.offsetWidth)+"px"),this.value>(u-2*d)*v&&(this.value=(u-2*d)*v,n.style.width=Number(d)-Number(d)+"px"),r.value<=this.value<=(u-2*d)*v&&(n.style.width=Number(u)-Number(c.value)/v-Number(d)+"px"),this.select())}),c.addEventListener("blur",function(){+this.value<+r.value&&(this.value=r.value,n.style.width=Number(d)-Number(a.offsetWidth)+"px"),this.value>(u-2*d)*v&&(this.value=(u-2*d)*v,n.style.width=Number(d)-Number(d)+"px"),r.value<=this.value<=(u-2*d)*v&&(n.style.width=Number(u)-Number(c.value)/v-Number(d)+"px")}),s.ondragstart=function(){return!1},a.style.width=Number(r.value)/v+Number(d)+"px",n.style.width=Number(u)-Number(c.value)/v-Number(d)+"px"}0<=currentLocation.pathname.lastIndexOf("/index.html")&&(writeUs(),map(),goodsCardBasket(),service(),slider()),0<=currentLocation.pathname.lastIndexOf("/catalog.html")&&(goodsCardBasket(),filterRangeSlider());
